# SPDX-FileCopyrightText: The RamenDR authors
# SPDX-License-Identifier: Apache-2.0

# yamllint disable rule:line-length
---
resources:
  - https://raw.githubusercontent.com/argoproj/argo-cd/release-2.11/manifests/install.yaml

patches:
  - target:
      kind: Role
      name: argocd-applicationset-controller
    patch: |-
      - op: replace
        path: /rules
        value:
        - apiGroups:
          - argoproj.io
          resources:
          - applications
          - applicationsets
          - applicationsets/finalizers
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - argoproj.io
          resources:
          - appprojects
          verbs:
          - get
        - apiGroups:
          - argoproj.io
          resources:
          - applicationsets/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - get
          - list
          - patch
          - watch
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - apps
          - extensions
          resources:
          - deployments
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - cluster.open-cluster-management.io
          resources:
          - placementdecisions
          verbs:
          - get
          - list
          - watch
